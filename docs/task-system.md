# 任务管理系统

基于 [howm](https://howm.osdn.jp/) 的浮沉式任务管理。

## 语法

在笔记中使用 `[日期]符号` 格式创建任务：

| 类型 | 语法 | 说明 |
|------|------|------|
| Schedule | `[2025-01-05]@` | 特定日期事件，仅当天显示 |
| Todo | `[2025-01-05]+` | 从该日期开始浮起，越久优先级越高 |
| Deadline | `[2025-01-10]!` | 截止日期，越近优先级越高 |
| Reminder | `[2025-01-01]-` | 该日期后逐渐下沉（30天后消失） |
| Defer | `[2025-01-01]~30` | 周期性任务，每30天循环一次 |
| Defer | `[2025-01-01]~7x3` | 周期性任务，每7天完成3次 |
| Done | `[2025-01-05].` | 已完成，不显示 |

### 时间格式

- 仅日期：`[2025-01-05]@`
- 带时间：`[2025-01-05 14:30]@`

### 区间格式

支持日期/时间区间，适用于持续多天或多小时的事件：

| 格式 | 示例 | 说明 |
|------|------|------|
| 日期到日期 | `[2025-01-05 to 2025-01-10]@` | 1月5日至10日的事件 |
| 时间到时间 | `[2025-01-05 14:30 to 16:00]@` | 同一天14:30到16:00 |
| 完整区间 | `[2025-01-05 14:30 to 2025-01-10 16:00]@` | 跨天带时间 |
| 日期到日期时间 | `[2025-01-05 to 2025-01-10 16:00]@` | 开始日期到结束日期时间 |

区间语法对不同任务类型的影响：

- **Schedule** `@`：整个区间内都显示，显示"进行中 N/M"
- **Deadline** `!`：以结束日期作为截止日期
- **Reminder** `-`：从开始日期提醒，结束日期后30天消失
- **Todo/Defer**：从开始日期计算

### 行内描述

在任务标记后添加描述，会显示在 Agenda 视图中：

```
[2025-01-10]! 提交报告
[2025-01-05]@ 团队会议
[2025-01-01]+ 整理文档
```

如果没有行内描述，则显示卡片标题。

## 周期性任务（Defer）

### 基本语法

- `[date]~N`：每 N 天完成 1 次
- `[date]~NxM`：每 N 天完成 M 次

### 示例

| 语法 | 含义 |
|------|------|
| `[2025-01-01]~7` | 每周 1 次 |
| `[2025-01-01]~7x3` | 每周 3 次 |
| `[2025-01-01]~1` | 每天 1 次 |
| `[2025-01-01]~30x20` | 每月 20 次（工作日打卡）|

### 打卡记录

使用缩进的子任务记录每次完成：

```
[2025-01-01]~7x3 每周锻炼三次
    [2025-01-15]. 晨跑 5km
    [2025-01-14]. 游泳
    [2025-01-13]. 健身房
    [2025-01-08]. 跑步
    [2025-01-06]. 游泳
    [2025-01-01]. 开始
```

- 父任务使用 `[date]~N` 或 `[date]~NxM` 定义周期
- 子任务使用 `[date].` 记录每次打卡，可附带备注
- 当前周期完成目标次数后，任务从 Agenda 视图中隐藏
- 下一个周期开始时，任务重新出现

### Agenda 显示

- 单次目标：`第 3 轮 · 已打卡 8 次`
- 多次目标：`第 3 轮 · 本轮 2/3 · 共 8 次`

## 浮沉机制

任务根据日期自动计算优先级，高优先级任务"浮"到列表顶部：

- **Schedule** `@`：当天显示，其他日期隐藏
- **Todo** `+`：从指定日期开始可见，每过一天优先级+1（越拖越高）
- **Deadline** `!`：截止前可见，越近优先级越高，过期后最高优先级
- **Reminder** `-`：从指定日期开始下沉，30天后消失
- **Defer** `~N` / `~NxM`：每N天循环一次，周期开始3天内可见，完成目标后隐藏

## 颜色标识

- 🟢 Schedule - 绿色
- 🟠 Todo - 橙色
- 🔴 Deadline - 红色
- 🔵 Reminder - 青色
- 🔷 Defer - 蓝色
- ⚫ Done - 灰色 + 删除线
